@page "{cameraguid:cameraguid}"
@model CamControl.Pages.CameraControl.IndexModel
@using Microsoft.AspNetCore.Mvc.Localization;
@using Microsoft.Extensions.Localization;
@inject IStringLocalizer<IndexModel> Localizer
@inject IHtmlLocalizer<IndexModel> htmlLocalizer
@{
    ViewData["Title"] = @Localizer["Kamera Fernbedienung"];
}
}
<section id="main-content">
    <section class="wrapper site-min-height">
        <div class="row mt">
            <div class="col-lg-12">
                <div class="form-panel">
                   
                    <h4 class="mb title">@Localizer["Steuerung"]</h4>
                    <hr />
                     <div  class="panel-body">
                        @if (Model.Camera.ShowPreviewAsMJpeg)
                        {
                            <img id="previewstream" class="img-fluid img-thumbnail" src="/mjpegstream?rtspUrl=@Model.CameraWrapper.RTSPSecondURL">
                        } else
                        {
                            <video id="previewstream" controls autoplay width="640" height="360">
                                <source src="/h264stream?rtspUrl=@Model.CameraWrapper.RTSPSecondURL" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        }
                    </div>
                    <div class="container">
                        <div class="row d-flex justify-content-center">
                            <button type="button" class="btn btn-light" style="width:48px" onclick="move('up')"><i class="fa fa-arrow-up"></i></button>
                        </div>
                        <div class="row row-cols-3  d-flex justify-content-center">

                            <button type="button" class="btn btn-light d-inline-block" style="width:48px" onclick="move('left')"><i class="fa fa-arrow-left"></i></button>


                            <button type="button" class="btn btn-light d-inline-block" style="width:48px" onclick="move('home')"><i class="fa fa-arrows-to-circle"></i></button>

                            <button type="button" class="btn btn-light d-inline-block" style="width:48px" onclick="move('right')"><i class="fa fa-arrow-right"></i></button>
                        </div>
                        <div class="row d-flex justify-content-center">
                            <button type="button" class="btn btn-light" style="width:48px" onclick="move('down')"><i class="fa fa-arrow-down"></i></button>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <a asp-page="./Edit" asp-route-cameraguid="@Model.Camera?.Camera_Guid">@Localizer["bearbeiten"]</a> |
                    <a asp-page="./Delete" asp-route-cameraguid="@Model.Camera?.Camera_Guid">@Localizer["löschen"]</a> |
                    @* <a asp-page="./Index">@Localizer["Zurück zur Liste"]</a> *@
                </div>
            </div>
        </div>
    </section>
</section>
@section PageJavaScript {
    <script>
    function move(direction) {

    }
    
  //      $("#previewstream")
  //.on( "error", function(handler) {
  //  alert( "Stream konnte nicht geladen werden. Eventuell ist FFmpeg nicht installiert!" )
  //} )
 //          .attr("src", "/mjpegstream?rtspUrl=rtsp://@Model.Camera.IpAdress:@Model.CameraWrapper.PortFirstStream");
    </script>
}